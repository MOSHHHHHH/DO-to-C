<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×ª×¨×’×•×œ ×©××•×ª ×ª×•×•×™×</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 40px;
            max-width: 800px;
            width: 100%;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        .mode-selection {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .mode-btn {
            padding: 25px;
            font-size: 1.3em;
            border: none;
            border-radius: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .mode-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .notes-display {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .note-item {
            padding: 15px 20px;
            border-radius: 10px;
            background: #f0f0f0;
            font-size: 1.2em;
            transition: all 0.3s ease;
            min-width: 60px;
            text-align: center;
        }

        .note-item.completed {
            background: #4ade80;
            color: white;
            transform: scale(0.95);
        }

        .note-item.current {
            background: #667eea;
            color: white;
            transform: scale(1.2);
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.5);
        }

        .answers-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 30px;
        }

        .answer-btn {
            padding: 20px;
            font-size: 1.2em;
            border: 3px solid #667eea;
            border-radius: 15px;
            background: white;
            color: #667eea;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
            font-weight: bold;
        }

        .answer-btn:hover {
            background: #667eea;
            color: white;
            transform: translateX(-5px);
        }

        .answer-number {
            display: inline-block;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: #667eea;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .answer-btn:hover .answer-number {
            background: white;
            color: #667eea;
        }

        .timer {
            text-align: center;
            font-size: 2em;
            color: #667eea;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .error-message {
            background: #ef4444;
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            font-size: 1.3em;
            animation: shake 0.5s ease;
            margin-bottom: 20px;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .records-list {
            list-style: none;
            margin: 30px 0;
        }

        .record-item {
            padding: 15px;
            background: #f0f0f0;
            border-radius: 10px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: fadeIn 0.5s ease;
        }

        .record-item.new-record {
            background: #fbbf24;
            font-weight: bold;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .success-message {
            background: #4ade80;
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            font-size: 1.3em;
            margin-bottom: 20px;
            animation: pulse 1s ease;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .btn-secondary {
            padding: 15px 30px;
            font-size: 1.1em;
            border: none;
            border-radius: 10px;
            background: #667eea;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .btn-secondary:hover {
            background: #764ba2;
            transform: translateY(-3px);
        }

        .hidden {
            display: none;
        }

        .buttons-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ×“×£ ×”×‘×™×ª -->
        <div id="homePage">
            <h1>ğŸµ ×ª×¨×’×•×œ ×©××•×ª ×ª×•×•×™× ğŸµ</h1>
            <div class="mode-selection">
                <button class="mode-btn" onclick="startQuiz('heb-to-eng')">×¢×‘×¨×™×ª â†’ ×× ×’×œ×™×ª</button>
                <button class="mode-btn" onclick="startQuiz('eng-to-heb')">×× ×’×œ×™×ª â†’ ×¢×‘×¨×™×ª</button>
                <button class="mode-btn" onclick="startQuiz('mixed')">××¢×•×¨×‘</button>
            </div>
        </div>

        <!-- ×“×£ ×”×ª×¨×’×™×œ -->
        <div id="quizPage" class="hidden">
            <div class="notes-display" id="notesDisplay"></div>
            <div id="errorMessage" class="hidden"></div>
            <div class="answers-container" id="answersContainer"></div>
            <div class="timer" id="timer">00.00</div>
        </div>

        <!-- ×“×£ ×”×©×™××™× -->
        <div id="recordsPage" class="hidden">
            <h1>ğŸ† ×©×™××™× ××™×©×™×™× ğŸ†</h1>
            <div id="successMessage" class="hidden"></div>
            <ul class="records-list" id="recordsList"></ul>
            <div class="buttons-container">
                <button class="btn-secondary" onclick="restartQuiz()">×ª×¨×’×™×œ × ×•×¡×£</button>
                <button class="btn-secondary" onclick="goHome()">×—×–×¨×” ×œ×“×£ ×”×‘×™×ª</button>
            </div>
        </div>
    </div>

    <script>
        const notes = {
            hebrew: ['×“×•', '×¨×”', '××™', '×¤×”', '×¡×•×œ', '×œ×”', '×¡×™'],
            english: ['C', 'D', 'E', 'F', 'G', 'A', 'B']
        };

        let currentMode = '';
        let quizNotes = [];
        let currentIndex = 0;
        let startTime = 0;
        let timerInterval = null;

        function startQuiz(mode) {
            currentMode = mode;
            currentIndex = 0;
            generateQuiz();
            
            document.getElementById('homePage').classList.add('hidden');
            document.getElementById('quizPage').classList.remove('hidden');
            document.getElementById('recordsPage').classList.add('hidden');
            
            startTime = Date.now();
            startTimer();
            displayQuestion();
        }

        function generateQuiz() {
            quizNotes = [];
            for (let i = 0; i < 10; i++) {
                const randomIndex = Math.floor(Math.random() * 7);
                let questionLang, answerLang;
                
                if (currentMode === 'mixed') {
                    questionLang = Math.random() < 0.5 ? 'hebrew' : 'english';
                    answerLang = questionLang === 'hebrew' ? 'english' : 'hebrew';
                } else if (currentMode === 'heb-to-eng') {
                    questionLang = 'hebrew';
                    answerLang = 'english';
                } else {
                    questionLang = 'english';
                    answerLang = 'hebrew';
                }
                
                quizNotes.push({
                    question: notes[questionLang][randomIndex],
                    answer: notes[answerLang][randomIndex],
                    questionLang: questionLang,
                    answerLang: answerLang,
                    correctIndex: randomIndex
                });
            }
        }

        function displayQuestion() {
            const notesDisplay = document.getElementById('notesDisplay');
            notesDisplay.innerHTML = '';
            
            quizNotes.forEach((note, index) => {
                const noteItem = document.createElement('div');
                noteItem.className = 'note-item';
                if (index < currentIndex) {
                    noteItem.classList.add('completed');
                } else if (index === currentIndex) {
                    noteItem.classList.add('current');
                }
                noteItem.textContent = note.question;
                notesDisplay.appendChild(noteItem);
            });

            displayAnswers();
        }

        function displayAnswers() {
            const answersContainer = document.getElementById('answersContainer');
            answersContainer.innerHTML = '';
            
            const currentNote = quizNotes[currentIndex];
            const answers = generateAnswers(currentNote);
            
            answers.forEach((answer, index) => {
                const answerBtn = document.createElement('button');
                answerBtn.className = 'answer-btn';
                answerBtn.innerHTML = `
                    <span class="answer-number">${index + 1}</span>
                    <span>${answer.text}</span>
                `;
                answerBtn.onclick = () => checkAnswer(answer.isCorrect);
                answersContainer.appendChild(answerBtn);
            });
        }

        function generateAnswers(currentNote) {
            const answerLang = currentNote.answerLang;
            const correctIndex = currentNote.correctIndex;
            
            let wrongIndices = [];
            while (wrongIndices.length < 2) {
                const randomIndex = Math.floor(Math.random() * 7);
                if (randomIndex !== correctIndex && !wrongIndices.includes(randomIndex)) {
                    wrongIndices.push(randomIndex);
                }
            }
            
            const answers = [
                { text: notes[answerLang][correctIndex], isCorrect: true },
                { text: notes[answerLang][wrongIndices[0]], isCorrect: false },
                { text: notes[answerLang][wrongIndices[1]], isCorrect: false }
            ];
            
            return answers.sort(() => Math.random() - 0.5);
        }

        function checkAnswer(isCorrect) {
            if (isCorrect) {
                currentIndex++;
                if (currentIndex < 10) {
                    displayQuestion();
                } else {
                    finishQuiz();
                }
            } else {
                showError();
            }
        }

        function showError() {
            const errorDiv = document.getElementById('errorMessage');
            errorDiv.textContent = '×˜×¢×•×ª, ××ª×—×™×œ×™× ××”×ª×—×œ×”';
            errorDiv.className = 'error-message';
            
            setTimeout(() => {
                errorDiv.classList.add('hidden');
                currentIndex = 0;
                generateQuiz();
                startTime = Date.now();
                displayQuestion();
            }, 2000);
        }

        function startTimer() {
            timerInterval = setInterval(() => {
                const elapsed = (Date.now() - startTime) / 1000;
                const seconds = Math.floor(elapsed);
                const ms = Math.floor((elapsed - seconds) * 100);
                document.getElementById('timer').textContent = 
                    `${seconds.toString().padStart(2, '0')}.${ms.toString().padStart(2, '0')}`;
            }, 10);
        }

        function finishQuiz() {
            clearInterval(timerInterval);
            const finalTime = (Date.now() - startTime) / 1000;
            saveRecord(finalTime);
            showRecords(finalTime);
        }

        function saveRecord(time) {
            const records = JSON.parse(localStorage.getItem(`records_${currentMode}`) || '[]');
            records.push({
                time: time,
                date: new Date().toLocaleDateString('he-IL')
            });
            records.sort((a, b) => a.time - b.time);
            const topRecords = records.slice(0, 5);
            localStorage.setItem(`records_${currentMode}`, JSON.stringify(topRecords));
        }

        function showRecords(currentTime) {
            document.getElementById('quizPage').classList.add('hidden');
            document.getElementById('recordsPage').classList.remove('hidden');
            
            const records = JSON.parse(localStorage.getItem(`records_${currentMode}`) || '[]');
            const recordsList = document.getElementById('recordsList');
            recordsList.innerHTML = '';
            
            const isNewRecord = records.some(r => Math.abs(r.time - currentTime) < 0.01);
            
            if (isNewRecord) {
                const successMsg = document.getElementById('successMessage');
                successMsg.textContent = 'ğŸ‰ ×©×™× ×—×“×©! ×›×œ ×”×›×‘×•×“! ğŸ‰';
                successMsg.className = 'success-message';
            }
            
            if (records.length === 0) {
                recordsList.innerHTML = '<li class="record-item">××™×Ÿ ×¢×“×™×™×Ÿ ×©×™××™×</li>';
            } else {
                records.forEach((record, index) => {
                    const li = document.createElement('li');
                    li.className = 'record-item';
                    if (Math.abs(record.time - currentTime) < 0.01) {
                        li.classList.add('new-record');
                    }
                    const seconds = Math.floor(record.time);
                    const ms = Math.floor((record.time - seconds) * 100);
                    li.innerHTML = `
                        <span>#${index + 1}</span>
                        <span>${seconds}.${ms.toString().padStart(2, '0')} ×©× ×™×•×ª</span>
                        <span>${record.date}</span>
                    `;
                    recordsList.appendChild(li);
                });
            }
        }

        function restartQuiz() {
            startQuiz(currentMode);
        }

        function goHome() {
            document.getElementById('recordsPage').classList.add('hidden');
            document.getElementById('homePage').classList.remove('hidden');
            document.getElementById('successMessage').classList.add('hidden');
        }

        // ××§×©×™ ×§×™×¦×•×¨
        document.addEventListener('keydown', (e) => {
            if (document.getElementById('quizPage').classList.contains('hidden')) return;
            
            if (e.key === '1' || e.key === '2' || e.key === '3') {
                const buttons = document.querySelectorAll('.answer-btn');
                const index = parseInt(e.key) - 1;
                if (buttons[index]) {
                    buttons[index].click();
                }
            }
        });
    </script>
</body>
</html>
