<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×ª×¨×’×•×œ ×”××¨×ª ×ª×•×•×™×</title>
    <!-- ×˜×¢×™× ×ª Tailwind CSS ×œ×˜×•×‘×ª ×¢×™×¦×•×‘ ××•×“×¨× ×™ ×•×¨×¡×¤×•× ×¡×™×‘×™ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ×”×’×“×¨×•×ª ×›×œ×œ×™×•×ª ×•×’×•×¤×Ÿ */
        @import url('https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;700&display=swap');
        body {
            font-family: 'Heebo', sans-serif;
            background-color: #f7f9fc; /* ×¨×§×¢ ×‘×”×™×¨ */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            width: 100%;
            background-color: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            animation: fadeIn 0.5s ease-out;
            border: 1px solid #e0e0e0;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ×¢×™×¦×•×‘ ×›×¤×ª×•×¨×™× ××™×•×—×“ */
        .choice-button {
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .choice-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);
        }

        /* ×¢×™×¦×•×‘ ×ª×©×•×‘×•×ª */
        .answer-option {
            transition: all 0.2s ease;
            cursor: pointer;
        }
        .answer-option:hover:not(.disabled) {
            background-color: #f0f4ff;
            border-color: #4f46e5;
        }
        .answer-option:active:not(.disabled) {
            transform: scale(0.98);
        }

        /* ×¡×’× ×•×Ÿ ×”×ª×• ×”× ×•×›×—×™ */
        .current-note-item {
            font-size: 1.5rem; /* ×’×•×“×œ ×’×“×•×œ ×™×•×ª×¨ */
            font-weight: 700;
            color: #4f46e5;
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(79, 70, 229, 0.5);
            transition: all 0.3s ease-in-out;
        }

        /* ×˜×™×™××¨ ××•×“×’×© */
        #timerDisplay {
            font-size: 2rem;
            font-weight: 700;
            color: #10b981;
            direction: ltr; /* ×›×™×•×•×Ÿ ××©×××œ ×œ×™××™×Ÿ ×œ×˜×™×™××¨ */
        }
        
        /* ×”×•×“×¢×ª ×©×’×™××” */
        #errorMessage {
            transition: opacity 0.3s ease-in-out;
        }
        
        /* ×¢×™×¦×•×‘ ×›×¤×ª×•×¨×™ × ×™×•×•×˜ */
        .nav-button {
            transition: background-color 0.3s ease;
        }
        .nav-button:hover {
            filter: brightness(1.1);
        }
    </style>
</head>
<body>

    <div id="app" class="container">
        <!-- ×ª×•×›×Ÿ ×”××¤×œ×™×§×¦×™×” ×™×¨×•× ×“×¨ ×›××Ÿ -->
    </div>

    <script>
        // ××™×¤×•×™ ×©××•×ª ×”×ª×•×•×™×
        const NOTE_MAPPINGS = {
            '×“×•': 'C',
            '×¨×”': 'D',
            '××™': 'E',
            '×¤×': 'F',
            '×¡×•×œ': 'G',
            '×œ×”': 'A',
            '×¡×™': 'B'
        };

        const HEBREW_NOTES = Object.keys(NOTE_MAPPINGS);
        const ENGLISH_NOTES = Object.values(NOTE_MAPPINGS);

        // ××¦×‘×™ ×”××¤×œ×™×§×¦×™×”
        const STATES = {
            HOME: 'home',
            QUIZ: 'quiz',
            SCORE: 'score'
        };

        // ××¦×‘ ×’×œ×•×‘×œ×™ ×©×œ ×”××¤×œ×™×§×¦×™×”
        let appState = {
            currentState: STATES.HOME,
            quizMode: null, // 'hebToEng', 'engToHeb', 'both'
            sourceNotes: [],
            targetNotes: [],
            currentNoteIndex: 0,
            startTime: null,
            timerInterval: null,
            elapsedTime: 0,
            isQuizActive: false,
            answerOptions: [],
            isNewRecord: false,
            highScores: loadHighScores(),
            timerDisplay: '0.00'
        };

        const appDiv = document.getElementById('app');

        // --- ×¤×•× ×§×¦×™×•×ª ×¢×–×¨ ×›×œ×œ×™×•×ª ---

        /**
         * ××¢×¨×‘×‘ ××¢×¨×š ×‘××•×¤×Ÿ ××§×¨××™ (××œ×’×•×¨×™×ª× Fisher-Yates).
         * @param {Array} array ×”××¢×¨×š ×œ×¢×¨×‘×•×‘
         * @returns {Array} ×”××¢×¨×š ×”××¢×•×¨×‘×‘
         */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        /**
         * ××—×–×™×¨ ××¢×¨×š ×©×œ 10 ×ª×•×•×™× ×™×™×—×•×“×™×™× ×‘××•×¤×Ÿ ××§×¨××™ ×¢×œ ×‘×¡×™×¡ ××¦×‘ ×”×§×•×•×™×–.
         * @param {string} mode ××¦×‘ ×”×§×•×•×™×– ('hebToEng', 'engToHeb', 'both')
         * @returns {Array} ××¢×¨×š ×©×œ 10 ×©××•×ª ×ª×•×•×™×
         */
        function generateRandomNotes(mode) {
            let possibleNotes;
            if (mode === 'hebToEng') {
                possibleNotes = HEBREW_NOTES;
            } else if (mode === 'engToHeb') {
                possibleNotes = ENGLISH_NOTES;
            } else { // 'both'
                possibleNotes = shuffleArray([...HEBREW_NOTES, ...ENGLISH_NOTES]);
            }
            
            // ×‘×•×—×¨×™× 10 ×ª×•×•×™× ×™×™×—×•×“×™×™× ×‘××•×¤×Ÿ ××§×¨××™
            const shuffledNotes = shuffleArray([...possibleNotes]);
            return shuffledNotes.slice(0, 10);
        }

        /**
         * ××—×•×œ×œ 3 ××¤×©×¨×•×™×•×ª ×ª×©×•×‘×” ××§×¨××™×•×ª, ×›×•×œ×œ ×”×ª×©×•×‘×” ×”× ×›×•× ×”.
         * @param {string} correctNote ×”×ª×• ×”× ×›×•×Ÿ
         * @param {string} mode ××¦×‘ ×”×§×•×•×™×–
         * @returns {Array} ××¢×¨×š ×©×œ 3 ××¤×©×¨×•×™×•×ª ××¢×•×¨×‘×‘×•×ª
         */
        function generateAnswerOptions(correctNote, mode) {
            let allOptions;
            if (mode === 'hebToEng' || (mode === 'both' && HEBREW_NOTES.includes(correctNote))) {
                allOptions = ENGLISH_NOTES;
            } else if (mode === 'engToHeb' || (mode === 'both' && ENGLISH_NOTES.includes(correctNote))) {
                allOptions = HEBREW_NOTES;
            } else {
                 // ×–×” ×œ× ×××•×¨ ×œ×§×¨×•×ª ×× ×”×œ×•×’×™×§×” × ×›×•× ×”, ××‘×œ ×›×’×™×‘×•×™
                return shuffleArray([correctNote, ...ENGLISH_NOTES.filter(n => n !== correctNote), ...HEBREW_NOTES.filter(n => n !== correctNote)]).slice(0, 3);
            }

            const incorrectOptions = allOptions.filter(n => n !== correctNote);
            const shuffledIncorrect = shuffleArray(incorrectOptions);
            
            const options = [correctNote, shuffledIncorrect[0], shuffledIncorrect[1]].filter(n => n); // ××•×•×“× ×©×™×© 3
            return shuffleArray(options.slice(0, 3));
        }

        /**
         * ×××™×¨ ×ª×• ××—×“ (×¢×‘×¨×™×ª ×œ×× ×’×œ×™×ª, ××• ×œ×”×¤×š).
         * @param {string} note ×”×ª×• ×”××§×•×¨
         * @returns {string} ×”×ª×• ×”××ª×•×¨×’×
         */
        function getTranslation(note) {
            if (HEBREW_NOTES.includes(note)) {
                return NOTE_MAPPINGS[note];
            } else if (ENGLISH_NOTES.includes(note)) {
                // ××¦×™××ª ×”××¤×ª×— (×¢×‘×¨×™) ×œ×¤×™ ×”×¢×¨×š (×× ×’×œ×™)
                return Object.keys(NOTE_MAPPINGS).find(key => NOTE_MAPPINGS[key] === note);
            }
            return '';
        }

        // --- ×¤×•× ×§×¦×™×•×ª ×œ× ×™×”×•×œ ×˜×™×™××¨ ---

        function startTimer() {
            if (appState.timerInterval) clearInterval(appState.timerInterval);
            appState.startTime = Date.now();
            appState.isQuizActive = true;
            appState.timerInterval = setInterval(updateTimerDisplay, 10);
        }

        function stopTimer() {
            appState.isQuizActive = false;
            clearInterval(appState.timerInterval);
            appState.timerInterval = null;
            appState.elapsedTime = Date.now() - appState.startTime;
            return appState.elapsedTime;
        }

        function updateTimerDisplay() {
            if (!appState.startTime) return;
            const now = Date.now();
            const elapsed = now - appState.startTime;
            const seconds = Math.floor(elapsed / 1000);
            const milliseconds = Math.floor((elapsed % 1000) / 10).toString().padStart(2, '0');
            appState.timerDisplay = `${seconds}.${milliseconds}`;
            const timerElement = document.getElementById('timerDisplay');
            if (timerElement) {
                timerElement.textContent = appState.timerDisplay;
            }
        }

        // --- × ×™×”×•×œ ×©×™××™× (High Scores) ---

        const HIGH_SCORES_KEY = 'noteConversionHighScores';

        function loadHighScores() {
            try {
                const scores = JSON.parse(localStorage.getItem(HIGH_SCORES_KEY) || '[]');
                // ×œ×•×•×“× ×©×”× ×××•×™× ×™×
                return scores.sort((a, b) => a.time - b.time).slice(0, 5);
            } catch (e) {
                console.error("×©×’×™××” ×‘×˜×¢×™× ×ª ×©×™××™× ×-localStorage:", e);
                return [];
            }
        }

        function saveHighScores(newTime, quizMode) {
            const date = new Date().toLocaleDateString('he-IL');
            const newScore = { time: newTime, date: date, mode: quizMode };
            
            const scores = loadHighScores();
            scores.push(newScore);

            // ××™×•×Ÿ ×•×§×™×˜×•× ×œ-5 ×”××”×™×¨×™× ×‘×™×•×ª×¨
            const sortedScores = scores.sort((a, b) => a.time - b.time).slice(0, 5);
            
            appState.isNewRecord = sortedScores.includes(newScore);
            appState.highScores = sortedScores;

            try {
                localStorage.setItem(HIGH_SCORES_KEY, JSON.stringify(sortedScores));
            } catch (e) {
                console.error("×©×’×™××” ×‘×©××™×¨×ª ×©×™××™× ×œ-localStorage:", e);
            }
        }

        function formatTime(ms) {
            const seconds = Math.floor(ms / 1000);
            const milliseconds = Math.floor((ms % 1000) / 10).toString().padStart(2, '0');
            return `${seconds}.${milliseconds} ×©× ×™×•×ª`;
        }
        
        // --- ×œ×•×’×™×§×ª ×§×•×•×™×– ---

        function initQuiz(mode) {
            appState.quizMode = mode;
            appState.sourceNotes = generateRandomNotes(mode);
            appState.currentNoteIndex = 0;
            appState.elapsedTime = 0;
            appState.timerDisplay = '0.00';
            appState.currentState = STATES.QUIZ;
            
            // ××—×©×‘×™× ××ª ×”×ª×©×•×‘×•×ª ×”× ×“×¨×©×•×ª ××¨××©
            appState.targetNotes = appState.sourceNotes.map(getTranslation);

            // ××—×•×œ×œ×™× ××ª ×”××¤×©×¨×•×™×•×ª ×œ×©××œ×” ×”×¨××©×•× ×”
            setAnswerOptions();
            
            renderApp();
            startTimer();
        }

        function setAnswerOptions() {
            const currentSourceNote = appState.sourceNotes[appState.currentNoteIndex];
            const correctTargetNote = appState.targetNotes[appState.currentNoteIndex];
            appState.answerOptions = generateAnswerOptions(correctTargetNote, appState.quizMode);
        }

        function handleAnswer(selectedNote) {
            if (!appState.isQuizActive) return;

            const correctNote = appState.targetNotes[appState.currentNoteIndex];
            
            if (selectedNote === correctNote) {
                // ×ª×©×•×‘×” × ×›×•× ×”
                appState.currentNoteIndex++;
                if (appState.currentNoteIndex < 10) {
                    // ××¢×‘×¨ ×œ×©××œ×” ×”×‘××”
                    setAnswerOptions();
                    renderApp();
                } else {
                    // ×¡×™×•× ×”××‘×—×Ÿ
                    const finalTime = stopTimer();
                    saveHighScores(finalTime, appState.quizMode);
                    appState.currentState = STATES.SCORE;
                    renderApp();
                }
            } else {
                // ×ª×©×•×‘×” ×©×’×•×™×”
                stopTimer();
                const errorElement = document.getElementById('errorMessage');
                if (errorElement) {
                    errorElement.textContent = "×˜×¢×•×ª, ××ª×—×™×œ×™× ××”×ª×—×œ×”";
                    errorElement.classList.remove('opacity-0');
                    errorElement.classList.add('bg-red-500');
                }
                
                // ××™×¤×•×¡ ×•×”×ª×—×œ×” ××—×“×© ×œ××—×¨ 2 ×©× ×™×•×ª
                setTimeout(() => {
                    if (errorElement) {
                        errorElement.classList.add('opacity-0');
                    }
                    initQuiz(appState.quizMode);
                }, 2000);
            }
        }
        
        // --- × ×™×”×•×œ ×§×œ×˜ ××§×œ×“×ª ---

        function handleKeyboardInput(event) {
            if (appState.currentState === STATES.QUIZ) {
                let selectionIndex = -1;
                if (event.key === '1') selectionIndex = 0;
                else if (event.key === '2') selectionIndex = 1;
                else if (event.key === '3') selectionIndex = 2;
                
                if (selectionIndex !== -1 && appState.answerOptions[selectionIndex]) {
                    handleAnswer(appState.answerOptions[selectionIndex]);
                }
            }
        }
        
        document.addEventListener('keydown', handleKeyboardInput);


        // --- ×¤×•× ×§×¦×™×•×ª ×¨×™× ×“×•×¨ (Rendering) ---

        /**
         * ×¨×™× ×“×•×¨ ×“×£ ×”×‘×™×ª (×‘×—×™×¨×ª ××¦×‘)
         */
        function renderHome() {
            appDiv.innerHTML = `
                <div class="text-center space-y-8">
                    <h1 class="text-4xl font-bold text-gray-800 mb-4">×ª×¨×’×•×œ ×”××¨×ª ×©××•×ª ×ª×•×•×™×</h1>
                    <p class="text-xl text-gray-600">×‘×—×¨ ××ª ×›×™×•×•×Ÿ ×”×ª×¨×’×•×œ:</p>
                    <div class="flex flex-col md:flex-row gap-6 mt-8 justify-center">
                        <button onclick="initQuiz('hebToEng')" class="choice-button bg-blue-600 text-white p-6 rounded-xl text-xl font-semibold w-full md:w-1/3 hover:bg-blue-700">
                            ×¢×‘×¨×™ (×“×•, ×¨×”, ××™) â† ×× ×’×œ×™ (ABC)
                        </button>
                        <button onclick="initQuiz('engToHeb')" class="choice-button bg-purple-600 text-white p-6 rounded-xl text-xl font-semibold w-full md:w-1/3 hover:bg-purple-700">
                            ×× ×’×œ×™ (ABC) â† ×¢×‘×¨×™ (×“×•, ×¨×”, ××™)
                        </button>
                        <button onclick="initQuiz('both')" class="choice-button bg-green-600 text-white p-6 rounded-xl text-xl font-semibold w-full md:w-1/3 hover:bg-green-700">
                            ×©× ×™×”× (××¢×•×¨×‘)
                        </button>
                    </div>
                </div>
            `;
        }

        /**
         * ×¨×™× ×“×•×¨ ×“×£ ×”×ª×¨×’×•×œ
         */
        function renderQuiz() {
            const currentSourceNote = appState.sourceNotes[appState.currentNoteIndex];
            
            // ×™×¦×™×¨×ª ×¨×©×™××ª ×”×ª×•×•×™× ×œ××¢×œ×”
            const notesBar = appState.sourceNotes.map((note, index) => {
                let classes = 'p-3 rounded-lg border-2 text-center transition-all duration-300 mx-1 min-w-[50px]';
                if (index < appState.currentNoteIndex) {
                    // ×ª×•×•×™× ×©× ×‘×—× ×• ×‘×”×¦×œ×—×” - ×™×¨×•×§
                    classes += ' bg-green-100 border-green-500 text-green-700';
                } else if (index === appState.currentNoteIndex) {
                    // ×”×ª×• ×”× ×•×›×—×™ - ××•×“×’×©
                    classes += ' bg-yellow-100 border-yellow-500 current-note-item';
                } else {
                    // ×ª×•×•×™× ×¢×ª×™×“×™×™×
                    classes += ' bg-gray-100 border-gray-300 text-gray-500';
                }
                
                return `<div class="${classes}">${note}</div>`;
            }).join('');
            
            // ×™×¦×™×¨×ª ××¤×©×¨×•×™×•×ª ×”×ª×©×•×‘×”
            const answerOptions = appState.answerOptions.map((option, index) => {
                return `
                    <button 
                        class="answer-option bg-white border-2 border-indigo-200 text-indigo-800 p-4 rounded-xl text-2xl font-semibold w-full flex items-center justify-between"
                        onclick="handleAnswer('${option}')"
                    >
                        <span class="text-lg text-indigo-500 font-normal ml-4">${index + 1}</span>
                        <span class="flex-grow text-center">${option}</span>
                        <span></span>
                    </button>
                `;
            }).join('');

            appDiv.innerHTML = `
                <div class="space-y-8">
                    <div class="flex justify-between items-center pb-4 border-b border-gray-200">
                        <h2 class="text-2xl font-bold text-gray-700">×ª×¨×’×•×œ ×¤×¢×™×œ - ×©××œ×” ${appState.currentNoteIndex + 1} ××ª×•×š 10</h2>
                        <!-- ×˜×™×™××¨ -->
                        <div class="bg-indigo-50 p-2 rounded-lg shadow-inner text-right">
                             <div id="timerDisplay" class="font-mono text-3xl">${appState.timerDisplay}</div>
                             <div class="text-sm text-gray-500 mt-1">×–××Ÿ ×©×—×œ×£</div>
                        </div>
                    </div>

                    <!-- ×¡×¨×’×œ ×”×ª×§×“××•×ª ×•×¦×™×•× ×™ ×”×ª×•×•×™× -->
                    <div class="flex justify-center items-center flex-wrap" dir="ltr">
                        ${notesBar}
                    </div>

                    <!-- ×”×ª×• ×”× ×•×›×—×™ ×œ×ª×¨×’×•× (×‘×’×“×•×œ) -->
                    <div class="text-center pt-6 pb-8">
                        <p class="text-2xl text-gray-500">×ª×¨×’× ××ª ×”×ª×•:</p>
                        <div class="text-8xl font-black text-indigo-600 mt-2 p-4 animate-pulse">${currentSourceNote}</div>
                    </div>
                    
                    <!-- ×”×•×“×¢×ª ×©×’×™××”/×¤×™×“×‘×§ -->
                    <div id="errorMessage" class="text-white text-center p-3 rounded-lg text-lg font-semibold opacity-0 transition-opacity duration-300"></div>

                    <!-- ××¤×©×¨×•×™×•×ª ×‘×—×™×¨×” -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6">
                        ${answerOptions}
                    </div>
                </div>
            `;
            
            // ×œ×•×•×“× ×©×”×˜×™×™××¨ ×××©×™×š ×œ×”×ª×¢×“×›×Ÿ (×‘××§×¨×” ×©×œ ××¢×‘×¨ ×‘×™×Ÿ ×¢××•×“×™×)
            if (appState.isQuizActive && !appState.timerInterval) {
                startTimer();
            }
        }

        /**
         * ×¨×™× ×“×•×¨ ×“×£ ×”×©×™××™×
         */
        function renderScore() {
            const finalTimeMs = appState.elapsedTime;
            const finalTimeFormatted = formatTime(finalTimeMs);
            const isNewRecord = appState.isNewRecord;

            const quizModeText = {
                'hebToEng': '×¢×‘×¨×™ â† ×× ×’×œ×™',
                'engToHeb': '×× ×’×œ×™ â† ×¢×‘×¨×™',
                'both': '×©× ×™×”× (××¢×•×¨×‘)'
            }[appState.quizMode];
            
            const scoresList = appState.highScores.length > 0 ? 
                appState.highScores.map((score, index) => `
                    <li class="flex justify-between items-center p-3 border-b border-gray-100 ${index === 0 ? 'bg-yellow-50 text-yellow-800 font-bold rounded-t-lg' : ''}">
                        <span class="text-lg">${index + 1}.</span>
                        <span class="text-lg">${formatTime(score.time)}</span>
                        <span class="text-sm text-gray-500">${score.date}</span>
                        <span class="text-sm text-gray-500">${score.mode ? (score.mode === appState.quizMode ? '(×”× ×•×›×—×™)' : '') : ''}</span>
                    </li>
                `).join('') :
                '<li class="text-center p-4 text-gray-500">××™×Ÿ ×¢×“×™×™×Ÿ ×©×™××™×. × ×¡×”/×™ ×œ×”×ª×—×™×œ ×ª×¨×’×•×œ!</li>';

            appDiv.innerHTML = `
                <div class="text-center space-y-8">
                    <h1 class="text-5xl font-extrabold text-indigo-700">×›×œ ×”×›×‘×•×“! ×¡×™×™××ª ××ª ×”××‘×—×Ÿ!</h1>
                    
                    <!-- ×ª×•×¦××” × ×•×›×—×™×ª -->
                    <div class="bg-indigo-100 p-6 rounded-xl shadow-lg border-2 border-indigo-400">
                        <p class="text-2xl font-semibold text-gray-700">×”×–××Ÿ ×©×œ×š:</p>
                        <p class="text-6xl font-black text-indigo-800 mt-2">${finalTimeFormatted}</p>
                    </div>

                    <!-- ×”×•×“×¢×ª ×©×™× ×—×“×© -->
                    ${isNewRecord ? `
                        <div class="bg-yellow-200 text-yellow-900 p-4 rounded-lg font-bold text-xl animate-pulse">
                            ğŸ‰ ×©×™× ××™×©×™ ×—×“×©! ×›×œ ×”×›×‘×•×“! ğŸ‰
                        </div>
                    ` : ''}

                    <!-- ×¨×©×™××ª ×©×™××™× -->
                    <div class="text-right">
                        <h3 class="text-2xl font-bold text-gray-700 mb-4">5 ×”×©×™××™× ×”××”×™×¨×™× ×‘×™×•×ª×¨:</h3>
                        <ul class="bg-white border border-gray-200 rounded-xl shadow-md divide-y divide-gray-100">
                            ${scoresList}
                        </ul>
                    </div>
                    
                    <!-- ×›×¤×ª×•×¨×™ × ×™×•×•×˜ -->
                    <div class="flex flex-col md:flex-row gap-4 justify-center pt-4">
                        <button 
                            onclick="initQuiz(appState.quizMode)" 
                            class="nav-button bg-green-600 text-white p-4 rounded-xl text-xl font-semibold flex items-center justify-center w-full md:w-auto hover:bg-green-700">
                            <svg class="w-6 h-6 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0l-2.58 2.58M4.582 9l2.58-2.58M16 16v5h.582m-15.356-2A8.001 8.001 0 0119.418 15m0 0l2.58-2.58m-2.58 2.58l-2.58 2.58"></path></svg>
                            ×ª×¨×’×•×œ × ×•×¡×£ ×‘××¦×‘ ${quizModeText}
                        </button>
                        <button 
                            onclick="appState.currentState = STATES.HOME; renderApp();" 
                            class="nav-button bg-gray-500 text-white p-4 rounded-xl text-xl font-semibold flex items-center justify-center w-full md:w-auto hover:bg-gray-600">
                            <svg class="w-6 h-6 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>
                            ×—×–×¨×” ×œ×“×£ ×”×‘×™×ª
                        </button>
                    </div>
                </div>
            `;
        }
        
        /**
         * ×¤×•× ×§×¦×™×™×ª ×”×¨×™× ×“×•×¨ ×”×¨××©×™×ª
         */
        function renderApp() {
            // ×¢×•×¦×¨ ××ª ×”×˜×™×™××¨ ×›×“×™ ×œ×× ×•×¢ ×“×œ×™×¤×” ×× ×× ×—× ×• ×¢×•×‘×¨×™× ×œ×“×£ ××—×¨
            if (appState.currentState !== STATES.QUIZ && appState.timerInterval) {
                clearInterval(appState.timerInterval);
                appState.timerInterval = null;
            }

            switch (appState.currentState) {
                case STATES.HOME:
                    renderHome();
                    break;
                case STATES.QUIZ:
                    renderQuiz();
                    break;
                case STATES.SCORE:
                    renderScore();
                    break;
                default:
                    renderHome();
            }
        }
        
        // ××ª×—×•×œ ×”××¤×œ×™×§×¦×™×” ×‘×˜×¢×™× ×ª ×”×“×£
        window.onload = renderApp;
    </script>
</body>
</html>
